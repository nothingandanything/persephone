<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script type="text/javascript">
function checkForm () {
	var bUserID = checkUserID();
	var bUserPwd = checkUserPwd();
	var bReUserPwd = checkReUserPwd();
	var bUserPhone = checkUserPhone();
	console.log("test");
	return bUserID && bUserPwd && bReUserPwd && bUserPhone;
}

function checkUserID () {
	var regex = /^.{4,8}$/;  // 任意字符, 4到8位
	var value = UserIDObj.value;
	var msg = "";
	if (!value)
		msg = "必须填写用户名！";
	else if (!regex.test(value))
		msg = "用户名不合法！";
	System.out.println("test");
	console.log(msg);
	UserIDMsg.innerHTML = msg;  // 将提示消息放入SPAN
	return msg = "";
}

function checkUserPwd () {
	var regex = /^.{6,8}$/;  // 任意字符, 6到8位
	var value = UserPwdObj.value;
	var msg = "";
	if (!value)
		msg = "必须填写密码！";
	else if (!regex.test(value))
		msg = "密码不合法！";
	UserPwdMsg.innerHTML = msg;
	UserPwdObj.parentNode.parentNode.style.color = msg == "" ? "black" : "red";
	return msg == "";
}

function checkReUserPwd() {		// 验证确认密码
	var passwordValue = UserPwdObj.value;
	var confirmValue = ReUserPwdObj.value;
	var msg = "";

    if(!confirmValue){
	    msg = "必须填写确认密码！";
	}
	else	if (passwordValue != confirmValue){
		msg = "密码必须保持一致！";
    }
	ReUserPwdMsg.innerHTML = msg;
	ReUserPwdObj.parentNode.parentNode.style.color = msg == "" ? "black" : "red";
	return msg == "";
}

function checkUserPhone () {
	var regex = /^[0-9]{11}$/;  // 11位数字
	var value = UserPhoneObj.value;
	var msg = "";
	if (!value)
		msg = "必须填写联系电话！";
	else if (!regex.test(value))
		msg = "联系电话不合法！";
	UserPhoneMsg.innerHTML = msg;
	UserPhoneObj.parentNode.parentNode.style.color = msg == "" ? "black" : "red";
	return msg == "";
}
</script>

<title>注册</title>
</head>

<body>
	<div>
		新用户注册
		<form action="" method="post" onsubmit="return checkForm();">
			<table>
				<tr>
					<td>用户名：</td>
					<td>
						<input id="UserID" name="UserID" onkeyup="checkUserID()"/>
					</td>
					<td><span id="UserIDMsg"></span><font color="#999999">用户名请设置4~8位</font></td>
				</tr>
				<tr>
					<td>密码：</td>
					<td>
						<input id="UserPwd" name="UserPwd" onkeyup="checkUserPwd()"/>
					</td>
					<td><span id="UserPwdMsg"></span><font color="#999999">密码请设置6~8位</font></td>
				</tr>
				<tr>
					<td>重复密码：</td>
					<td>
						<input id="ReUserPwd" name="ReUserPwd" onkeyup="checkReUserPwd()"/>
					</td>
					<td><span id="ReUserPwdMsg"></span></td>
				</tr>
				<tr>
					<td>联系电话：</td>
					<td>
						<input id="UserPhone" name="UserPhone" onkeyup="checkUserPhone()"/>
					</td>
					<td><span id="UserPhoneMsg"></span></td>
				</tr>
				<tr>
					<td>
						<button name="submit">提交</button>
					</td>
				</tr>
			</table>
		</form>
	</div>
</body>
</html>